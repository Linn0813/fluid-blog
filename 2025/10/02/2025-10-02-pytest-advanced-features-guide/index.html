

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/fluid-blog/img/favicon.jpg">
  <link rel="icon" href="/fluid-blog/img/favicon.jpg">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="yuxiaoling">
  <meta name="keywords" content="pytest, fixture, æ•°æ®é©±åŠ¨, Allure, YAML, æµ‹è¯•æŠ¥å‘Š, Python, æµ‹è¯•è¿›é˜¶">
  
    <meta name="description" content="æ·±å…¥æ¢è®¨Pytesté«˜çº§ç‰¹æ€§ï¼ŒåŒ…æ‹¬fixtureæœºåˆ¶ã€æ•°æ®é©±åŠ¨æµ‹è¯•å’ŒAllureæŠ¥å‘Šç”Ÿæˆï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹åˆ†äº«ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="ğŸ” Pytesté«˜çº§ç‰¹æ€§å®æˆ˜ï¼šä»ç å°šæ•™è‚²è¯¾ç¨‹ä¸­å­¦åˆ°çš„è¿›é˜¶æŠ€å·§">
<meta property="og:url" content="https://linn0813.github.io/2025/10/02/2025-10-02-pytest-advanced-features-guide/index.html">
<meta property="og:site_name" content="Linn&#39;s Blog">
<meta property="og:description" content="æ·±å…¥æ¢è®¨Pytesté«˜çº§ç‰¹æ€§ï¼ŒåŒ…æ‹¬fixtureæœºåˆ¶ã€æ•°æ®é©±åŠ¨æµ‹è¯•å’ŒAllureæŠ¥å‘Šç”Ÿæˆï¼Œç»“åˆå®æˆ˜æ¡ˆä¾‹åˆ†äº«ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://linn0813.github.io/fluid-blog/img/pytest.png">
<meta property="article:published_time" content="2025-10-02T11:00:00.000Z">
<meta property="article:modified_time" content="2026-01-21T04:03:44.626Z">
<meta property="article:author" content="yuxiaoling">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="pytest">
<meta property="article:tag" content="æ•°æ®é©±åŠ¨">
<meta property="article:tag" content="fixture">
<meta property="article:tag" content="Allure">
<meta property="article:tag" content="YAML">
<meta property="article:tag" content="æµ‹è¯•æŠ¥å‘Š">
<meta property="article:tag" content="æµ‹è¯•è¿›é˜¶">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://linn0813.github.io/fluid-blog/img/pytest.png">
  
  
  
    <meta name="msvalidate.01" content="C0AF818C725A2A1E112A1537E1064EA8" />
  
  <title>ğŸ” Pytesté«˜çº§ç‰¹æ€§å®æˆ˜ï¼šä»ç å°šæ•™è‚²è¯¾ç¨‹ä¸­å­¦åˆ°çš„è¿›é˜¶æŠ€å·§ - Linn&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/fluid-blog/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/fluid-blog/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/fluid-blog/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"linn0813.github.io","root":"/fluid-blog/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/fluid-blog/search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/fluid-blog/js/utils.js" ></script>
  <script  src="/fluid-blog/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/fluid-blog/">
      <strong>Linn&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fluid-blog/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fluid-blog/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fluid-blog/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fluid-blog/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fluid-blog/qa/" target="_self">
                <i class="iconfont icon-chat-fill"></i>
                <span>çŸ¥è¯†åº“é—®ç­”</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fluid-blog/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>å‹é“¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/fluid-blog/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äºç¬”è€…</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/fluid-blog/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="æ·±å…¥ç†è§£fixtureæœºåˆ¶ã€æ•°æ®é©±åŠ¨ä¸AllureæŠ¥å‘Šï¼Œæ‰“é€ æ›´å¼ºå¤§çš„æµ‹è¯•æ¡†æ¶"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-02 19:00" pubdate>
          2025å¹´10æœˆ2æ—¥ æ™šä¸Š
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.9k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          41 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">æ·±å…¥ç†è§£fixtureæœºåˆ¶ã€æ•°æ®é©±åŠ¨ä¸AllureæŠ¥å‘Šï¼Œæ‰“é€ æ›´å¼ºå¤§çš„æµ‹è¯•æ¡†æ¶</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="ğŸ”-Pytesté«˜çº§ç‰¹æ€§å®æˆ˜ï¼šä»ç å°šæ•™è‚²è¯¾ç¨‹ä¸­å­¦åˆ°çš„è¿›é˜¶æŠ€å·§"><a href="#ğŸ”-Pytesté«˜çº§ç‰¹æ€§å®æˆ˜ï¼šä»ç å°šæ•™è‚²è¯¾ç¨‹ä¸­å­¦åˆ°çš„è¿›é˜¶æŠ€å·§" class="headerlink" title="ğŸ” Pytesté«˜çº§ç‰¹æ€§å®æˆ˜ï¼šä»ç å°šæ•™è‚²è¯¾ç¨‹ä¸­å­¦åˆ°çš„è¿›é˜¶æŠ€å·§"></a>ğŸ” Pytesté«˜çº§ç‰¹æ€§å®æˆ˜ï¼šä»ç å°šæ•™è‚²è¯¾ç¨‹ä¸­å­¦åˆ°çš„è¿›é˜¶æŠ€å·§</h1><p>ğŸ‘‹ å¤§å®¶å¥½ï¼ç»§ä¸Šæ¬¡åˆ†äº«<a href="/2025/10/01/pytest-automation-testing-guide/">pytestå…¥é—¨åˆ°å®æˆ˜çš„å­¦ä¹ ç¬”è®°</a>åï¼Œæˆ‘åˆå­¦ä¹ äº†ç å°šæ•™è‚²çš„pytestè¯¾ç¨‹ï¼Œæ”¶è·äº†å¾ˆå¤šé«˜çº§ç‰¹æ€§å’Œå®æˆ˜æŠ€å·§ï¼ä»Šå¤©å°±æŠŠè¿™äº›è¿›é˜¶å†…å®¹æ•´ç†å‡ºæ¥ï¼Œä½œä¸ºä¸Šä¸€ç¯‡æ–‡ç« çš„è¡¥å……ï¼Œå¸Œæœ›èƒ½å¸®åŠ©å¤§å®¶æ›´æ·±å…¥åœ°ç†è§£å’Œåº”ç”¨pytestã€‚</p>
<p>ğŸ¬ æœ¬æ–‡åŸºäºç å°šæ•™è‚²çš„pytestè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶è¯¾ç¨‹ï¼Œè¯¾ç¨‹é“¾æ¥åˆ†äº«ç»™å¤§å®¶ï¼š</p>
<ul>
<li><strong>è§†é¢‘è¯¾ç¨‹</strong>ï¼š<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV14i4y1c7Jo?vd_source=65c2968c09490f4b218154711916b4d8&spm_id_from=333.788.videopod.episodes">pytestè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ - å“”å“©å“”å“©</a></li>
</ul>
<h2 id="ğŸ§ -ä¸€ã€å•å…ƒæµ‹è¯•æ¡†æ¶åŸºç¡€"><a href="#ğŸ§ -ä¸€ã€å•å…ƒæµ‹è¯•æ¡†æ¶åŸºç¡€" class="headerlink" title="ğŸ§  ä¸€ã€å•å…ƒæµ‹è¯•æ¡†æ¶åŸºç¡€"></a>ğŸ§  ä¸€ã€å•å…ƒæµ‹è¯•æ¡†æ¶åŸºç¡€</h2><p>åœ¨æ·±å…¥å­¦ä¹ pytestä¹‹å‰ï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦å…ˆç†æ¸…ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼šå•å…ƒæµ‹è¯•æ¡†æ¶å’Œè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„åŒºåˆ«ä¸è”ç³»ã€‚</p>
<h3 id="ğŸ”-æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”"><a href="#ğŸ”-æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”" class="headerlink" title="ğŸ” æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”"></a>ğŸ” æ ¸å¿ƒæ¦‚å¿µå¯¹æ¯”</h3><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>å•å…ƒæµ‹è¯•æ¡†æ¶</th>
<th>è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶</th>
</tr>
</thead>
<tbody><tr>
<td><strong>æ ¸å¿ƒåŠŸèƒ½</strong></td>
<td>æµ‹è¯•å‘ç°ã€æ‰§è¡Œã€æ–­è¨€ã€æŠ¥å‘Š</td>
<td>å®Œæ•´æµ‹è¯•æµç¨‹ç®¡ç†</td>
</tr>
<tr>
<td><strong>å…¸å‹ä»£è¡¨</strong></td>
<td>pytestã€unittestã€JUnit</td>
<td>åŸºäºå•å…ƒæµ‹è¯•æ¡†æ¶æ„å»ºçš„å®Œæ•´ä½“ç³»</td>
</tr>
<tr>
<td><strong>åº”ç”¨èŒƒå›´</strong></td>
<td>å•ä¸ªå‡½æ•°&#x2F;æ–¹æ³•çš„éªŒè¯</td>
<td>ç«¯åˆ°ç«¯æµ‹è¯•æµç¨‹</td>
</tr>
<tr>
<td><strong>å¤æ‚åº¦</strong></td>
<td>ç›¸å¯¹ç®€å•</td>
<td>åŒ…å«å¤šä¸ªç»„ä»¶çš„å¤æ‚ç³»ç»Ÿ</td>
</tr>
</tbody></table>
<h3 id="ğŸ”„-pyteståœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä½“ç³»ä¸­çš„ä½ç½®"><a href="#ğŸ”„-pyteståœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä½“ç³»ä¸­çš„ä½ç½®" class="headerlink" title="ğŸ”„ pyteståœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä½“ç³»ä¸­çš„ä½ç½®"></a>ğŸ”„ pyteståœ¨è‡ªåŠ¨åŒ–æµ‹è¯•ä½“ç³»ä¸­çš„ä½ç½®</h3><p>pytestä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œæ˜¯æ„å»ºå®Œæ•´è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„é‡è¦åŸºç¡€ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†pytestä¸ä»¥ä¸‹æŠ€æœ¯ç»“åˆä½¿ç”¨ï¼š</p>
<ul>
<li><strong>POMè®¾è®¡æ¨¡å¼</strong>ï¼šå®ç°é¡µé¢å…ƒç´ ä¸æµ‹è¯•é€»è¾‘åˆ†ç¦»</li>
<li><strong>æ•°æ®é©±åŠ¨æµ‹è¯•</strong>ï¼šä»å¤–éƒ¨æ–‡ä»¶è¯»å–æµ‹è¯•æ•°æ®</li>
<li><strong>å…³é”®å­—é©±åŠ¨æµ‹è¯•</strong>ï¼šå°è£…å¸¸ç”¨æ“ä½œä½œä¸ºå…³é”®å­—</li>
<li><strong>å…¨å±€é…ç½®ç®¡ç†</strong>ï¼šç»Ÿä¸€ç®¡ç†æµ‹è¯•ç¯å¢ƒå’Œé…ç½®</li>
<li><strong>æ—¥å¿—ç›‘æ§ç³»ç»Ÿ</strong>ï¼šè®°å½•æµ‹è¯•æ‰§è¡Œè¿‡ç¨‹</li>
<li><strong>APIæµ‹è¯•åº“</strong>ï¼šå¦‚requestsåº“è¿›è¡Œæ¥å£æµ‹è¯•</li>
<li><strong>UIè‡ªåŠ¨åŒ–æ¡†æ¶</strong>ï¼šå¦‚Seleniumè¿›è¡Œç•Œé¢æµ‹è¯•</li>
</ul>
<blockquote>
<p>ğŸ’¡ ä¸ªäººæ„Ÿæ‚Ÿï¼šç†è§£è¿™ç§å±‚æ¬¡å…³ç³»ï¼Œæœ‰åŠ©äºæˆ‘ä»¬åœ¨å®é™…å·¥ä½œä¸­æ›´å¥½åœ°è®¾è®¡æµ‹è¯•æ¶æ„ï¼Œé¿å…è¿‡åº¦è®¾è®¡æˆ–è®¾è®¡ä¸è¶³ã€‚</p>
</blockquote>
<h2 id="ğŸ› ï¸-äºŒã€pytestæ¡†æ¶ç‰¹æ€§"><a href="#ğŸ› ï¸-äºŒã€pytestæ¡†æ¶ç‰¹æ€§" class="headerlink" title="ğŸ› ï¸ äºŒã€pytestæ¡†æ¶ç‰¹æ€§"></a>ğŸ› ï¸ äºŒã€pytestæ¡†æ¶ç‰¹æ€§</h2><p>fixtureæ˜¯pytestæœ€æ ¸å¿ƒã€æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼é€šè¿‡è¿™é—¨è¯¾ç¨‹ï¼Œæˆ‘å¯¹fixtureæœ‰äº†æ›´æ·±å…¥çš„ç†è§£ã€‚</p>
<h3 id="2-1-fixtureçš„äº”å¤§æ ¸å¿ƒå‚æ•°"><a href="#2-1-fixtureçš„äº”å¤§æ ¸å¿ƒå‚æ•°" class="headerlink" title="2.1 fixtureçš„äº”å¤§æ ¸å¿ƒå‚æ•°"></a>2.1 fixtureçš„äº”å¤§æ ¸å¿ƒå‚æ•°</h3><p>pytestçš„fixtureæœºåˆ¶é€šè¿‡<code>@pytest.fixture</code>è£…é¥°å™¨å®ç°ï¼Œæ”¯æŒäº”ä¸ªæ ¸å¿ƒå‚æ•°ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span>
    scope<span class="token operator">=</span><span class="token string">"function"</span><span class="token punctuation">,</span>       <span class="token comment"># ä½œç”¨åŸŸæ§åˆ¶</span>
    params<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"å‚æ•°1"</span><span class="token punctuation">,</span> <span class="token string">"å‚æ•°2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># å‚æ•°åŒ–é…ç½®</span>
    autouse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>          <span class="token comment"># è‡ªåŠ¨åº”ç”¨å¼€å…³</span>
    ids<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"case1"</span><span class="token punctuation">,</span> <span class="token string">"case2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># å‚æ•°åˆ«åè®¾ç½®</span>
    name<span class="token operator">=</span><span class="token string">"fixture_alias"</span>     <span class="token comment"># æ–¹æ³•åˆ«åå®šä¹‰</span>
<span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">demo_fixture</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""æ¼”ç¤ºfixtureçš„å‚æ•°é…ç½®"""</span>
    <span class="token comment"># å‰ç½®æ“ä½œ</span>
    <span class="token keyword">yield</span> request<span class="token punctuation">.</span>param  <span class="token comment"># è¿”å›å‚æ•°å€¼</span>
    <span class="token comment"># åç½®æ“ä½œï¼ˆyieldä¹‹åçš„ä»£ç ï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="2-2-fixtureä½œç”¨åŸŸæ·±åº¦è§£æ"><a href="#2-2-fixtureä½œç”¨åŸŸæ·±åº¦è§£æ" class="headerlink" title="2.2 fixtureä½œç”¨åŸŸæ·±åº¦è§£æ"></a>2.2 fixtureä½œç”¨åŸŸæ·±åº¦è§£æ</h3><p>fixtureçš„<code>scope</code>å‚æ•°å†³å®šäº†å®ƒçš„ç”Ÿå‘½å‘¨æœŸå’Œåº”ç”¨èŒƒå›´ï¼Œè¿™æ˜¯pytestç›¸æ¯”unittestçš„ä¸€å¤§ä¼˜åŠ¿ï¼š</p>
<table>
<thead>
<tr>
<th>ä½œç”¨åŸŸ</th>
<th>ç”Ÿå‘½å‘¨æœŸæè¿°</th>
<th>é€‚ç”¨åœºæ™¯</th>
<th>èµ„æºæ¶ˆè€—</th>
</tr>
</thead>
<tbody><tr>
<td><strong>function</strong></td>
<td>æ¯ä¸ªæµ‹è¯•å‡½æ•°æ‰§è¡Œä¸€æ¬¡ï¼ˆé»˜è®¤ï¼‰</td>
<td>å•ä¸ªå‡½æ•°çš„èµ„æºåˆå§‹åŒ–</td>
<td>è¾ƒé«˜</td>
</tr>
<tr>
<td><strong>class</strong></td>
<td>æ¯ä¸ªæµ‹è¯•ç±»æ‰§è¡Œä¸€æ¬¡</td>
<td>ç±»çº§åˆ«èµ„æºï¼ˆå¦‚æ•°æ®åº“è¿æ¥ï¼‰</td>
<td>ä¸­ç­‰</td>
</tr>
<tr>
<td><strong>module</strong></td>
<td>æ¯ä¸ªæ¨¡å—æ‰§è¡Œä¸€æ¬¡</td>
<td>æ¨¡å—çº§åˆ«é…ç½®ï¼ˆå…¨å±€å˜é‡ï¼‰</td>
<td>è¾ƒä½</td>
</tr>
<tr>
<td><strong>package</strong></td>
<td>æ¯ä¸ªåŒ…æ‰§è¡Œä¸€æ¬¡</td>
<td>è·¨æ¨¡å—èµ„æºç®¡ç†</td>
<td>å¾ˆä½</td>
</tr>
<tr>
<td><strong>session</strong></td>
<td>æ•´ä¸ªæµ‹è¯•ä¼šè¯æ‰§è¡Œä¸€æ¬¡</td>
<td>å…¨å±€èµ„æºï¼ˆæµè§ˆå™¨å®ä¾‹ï¼‰</td>
<td>æœ€ä½</td>
</tr>
</tbody></table>
<h3 id="2-3-å®æˆ˜æ¡ˆä¾‹ï¼šå¤šå±‚çº§fixtureåº”ç”¨"><a href="#2-3-å®æˆ˜æ¡ˆä¾‹ï¼šå¤šå±‚çº§fixtureåº”ç”¨" class="headerlink" title="2.3 å®æˆ˜æ¡ˆä¾‹ï¼šå¤šå±‚çº§fixtureåº”ç”¨"></a>2.3 å®æˆ˜æ¡ˆä¾‹ï¼šå¤šå±‚çº§fixtureåº”ç”¨</h3><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘é€šå¸¸ä¼šæ„å»ºä¸€ä¸ªå¤šå±‚çº§çš„fixtureä½“ç³»ï¼Œä»¥å®ç°èµ„æºçš„é«˜æ•ˆç®¡ç†ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># conftest.py - å…¨å±€å…±äº«çš„fixture</span>
<span class="token keyword">import</span> pytest
<span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver

<span class="token comment"># ä¼šè¯çº§fixtureï¼šæ•´ä¸ªæµ‹è¯•è¿‡ç¨‹åªå¯åŠ¨ä¸€æ¬¡æµè§ˆå™¨</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span>scope<span class="token operator">=</span><span class="token string">"session"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">browser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n[ä¼šè¯å¼€å§‹] å¯åŠ¨æµè§ˆå™¨"</span><span class="token punctuation">)</span>
    driver <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">yield</span> driver
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n[ä¼šè¯ç»“æŸ] å…³é—­æµè§ˆå™¨"</span><span class="token punctuation">)</span>
    driver<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># ç±»çº§fixtureï¼šæ¯ä¸ªæµ‹è¯•ç±»å…±äº«æ•°æ®åº“è¿æ¥</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span>scope<span class="token operator">=</span><span class="token string">"class"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">db_connection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n[ç±»åˆå§‹åŒ–] è¿æ¥æ•°æ®åº“"</span><span class="token punctuation">)</span>
    <span class="token comment"># æ¨¡æ‹Ÿæ•°æ®åº“è¿æ¥</span>
    conn <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"connected"</span><span class="token punctuation">,</span> <span class="token string">"db"</span><span class="token punctuation">:</span> <span class="token string">"test_db"</span><span class="token punctuation">&#125;</span>
    <span class="token keyword">yield</span> conn
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n[ç±»ç»“æŸ] æ–­å¼€æ•°æ®åº“è¿æ¥"</span><span class="token punctuation">)</span>

<span class="token comment"># å‡½æ•°çº§fixtureï¼šæ¯ä¸ªæµ‹è¯•å‡½æ•°éƒ½éœ€è¦çš„æµ‹è¯•æ•°æ®</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span>
<span class="token keyword">def</span> <span class="token function">test_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token string">"username"</span><span class="token punctuation">:</span> <span class="token string">"test_user"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string">"test123"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="2-4-fixture-vs-setup-teardownï¼šæ·±åº¦å¯¹æ¯”"><a href="#2-4-fixture-vs-setup-teardownï¼šæ·±åº¦å¯¹æ¯”" class="headerlink" title="2.4 fixture vs setup&#x2F;teardownï¼šæ·±åº¦å¯¹æ¯”"></a>2.4 fixture vs setup&#x2F;teardownï¼šæ·±åº¦å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>setup&#x2F;teardown</th>
<th>@pytest.fixture</th>
</tr>
</thead>
<tbody><tr>
<td>ä½œç”¨åŸŸ</td>
<td>å›ºå®šï¼ˆç±»æˆ–æ–¹æ³•çº§åˆ«ï¼‰</td>
<td>çµæ´»é…ç½®ï¼ˆ5ç§ä½œç”¨åŸŸï¼‰</td>
</tr>
<tr>
<td>å¤ç”¨æ€§</td>
<td>ä»…é™äºå½“å‰ç±»</td>
<td>å¯è·¨ç±»ã€æ¨¡å—ã€ä¼šè¯å¤ç”¨</td>
</tr>
<tr>
<td>å‚æ•°åŒ–</td>
<td>ä¸æ”¯æŒ</td>
<td>æ”¯æŒparamså‚æ•°åŒ–</td>
</tr>
<tr>
<td>è¿”å›å€¼</td>
<td>ä¸æ”¯æŒ</td>
<td>æ”¯æŒé€šè¿‡return&#x2F;yieldè¿”å›</td>
</tr>
<tr>
<td>å…¨å±€å…±äº«</td>
<td>ä¸æ”¯æŒ</td>
<td>é€šè¿‡conftest.pyæ”¯æŒ</td>
</tr>
<tr>
<td>è‡ªåŠ¨åº”ç”¨</td>
<td>å›ºå®šåº”ç”¨</td>
<td>æ”¯æŒautouseå‚æ•°æ§åˆ¶</td>
</tr>
</tbody></table>
<blockquote>
<p>ğŸ’¡ å®æˆ˜å»ºè®®ï¼šå¯¹äºå¤æ‚é¡¹ç›®ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨fixtureæ›¿ä»£ä¼ ç»Ÿçš„setup&#x2F;teardownæ–¹æ³•ï¼Œå¯ä»¥å¤§å¹…æé«˜æµ‹è¯•ä»£ç çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
</blockquote>
<h2 id="ğŸ”-ä¸‰ã€æµ‹è¯•ç”¨ä¾‹è§„èŒƒ"><a href="#ğŸ”-ä¸‰ã€æµ‹è¯•ç”¨ä¾‹è§„èŒƒ" class="headerlink" title="ğŸ” ä¸‰ã€æµ‹è¯•ç”¨ä¾‹è§„èŒƒ"></a>ğŸ” ä¸‰ã€æµ‹è¯•ç”¨ä¾‹è§„èŒƒ</h2><p>åœ¨ä½¿ç”¨pytestè¿›è¡Œæµ‹è¯•æ—¶ï¼Œéµå¾ªç»Ÿä¸€çš„æµ‹è¯•ç”¨ä¾‹è§„èŒƒå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h3 id="3-1-å‘½åè§„èŒƒ"><a href="#3-1-å‘½åè§„èŒƒ" class="headerlink" title="3.1 å‘½åè§„èŒƒ"></a>3.1 å‘½åè§„èŒƒ</h3><ul>
<li><strong>æµ‹è¯•æ¨¡å—</strong>: <code>test_*.py</code> æˆ– <code>*_test.py</code></li>
<li><strong>æµ‹è¯•ç±»</strong>: <code>Test*</code> (ä¸åŒ…å«<code>__init__</code>æ–¹æ³•)</li>
<li><strong>æµ‹è¯•æ–¹æ³•&#x2F;å‡½æ•°</strong>: <code>test_*</code></li>
<li><strong>fixtureå‡½æ•°</strong>: æè¿°æ€§åç§°ï¼Œå¦‚ <code>browser_setup</code>ã€<code>db_connection</code></li>
</ul>
<h3 id="3-2-æµ‹è¯•ç”¨ä¾‹ç»“æ„"><a href="#3-2-æµ‹è¯•ç”¨ä¾‹ç»“æ„" class="headerlink" title="3.2 æµ‹è¯•ç”¨ä¾‹ç»“æ„"></a>3.2 æµ‹è¯•ç”¨ä¾‹ç»“æ„</h3><p>ä¸€ä¸ªå¥½çš„æµ‹è¯•ç”¨ä¾‹åº”è¯¥åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>æµ‹è¯•å‰å‡†å¤‡</strong>ï¼šè®¾ç½®æµ‹è¯•ç¯å¢ƒå’Œæ•°æ®</li>
<li><strong>æ‰§è¡Œæµ‹è¯•</strong>ï¼šè°ƒç”¨è¢«æµ‹å‡½æ•°æˆ–æ–¹æ³•</li>
<li><strong>æ–­è¨€éªŒè¯</strong>ï¼šéªŒè¯æµ‹è¯•ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
<li><strong>æ¸…ç†å·¥ä½œ</strong>ï¼šæ¸…ç†æµ‹è¯•ç¯å¢ƒï¼ˆé€šå¸¸é€šè¿‡fixtureå®ç°ï¼‰</li>
</ol>
<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">test_valid_login</span><span class="token punctuation">(</span>api_client<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    æµ‹è¯•æœ‰æ•ˆçš„ç”¨æˆ·ç™»å½•åœºæ™¯
    æ­¥éª¤ï¼š
    1. å‡†å¤‡æœ‰æ•ˆçš„ç™»å½•å‡­æ®
    2. å‘é€ç™»å½•è¯·æ±‚
    3. éªŒè¯è¿”å›çŠ¶æ€ç å’Œå“åº”æ•°æ®
    """</span>
    <span class="token comment"># 1. å‡†å¤‡æ•°æ®</span>
    payload <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        <span class="token string">"username"</span><span class="token punctuation">:</span> <span class="token string">"valid_user"</span><span class="token punctuation">,</span>
        <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string">"valid_password"</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token comment"># 2. æ‰§è¡Œæ“ä½œ</span>
    response <span class="token operator">=</span> api_client<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">"/auth/login"</span><span class="token punctuation">,</span> json<span class="token operator">=</span>payload<span class="token punctuation">)</span>
    
    <span class="token comment"># 3. éªŒè¯ç»“æœ</span>
    <span class="token keyword">assert</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">"ç™»å½•åº”è¯¥æˆåŠŸ"</span>
    <span class="token keyword">assert</span> <span class="token string">"access_token"</span> <span class="token keyword">in</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"å“åº”ä¸­åº”åŒ…å«è®¿é—®ä»¤ç‰Œ"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="ğŸƒâ€â™‚ï¸-å››ã€è¿è¡Œæ–¹å¼"><a href="#ğŸƒâ€â™‚ï¸-å››ã€è¿è¡Œæ–¹å¼" class="headerlink" title="ğŸƒâ€â™‚ï¸ å››ã€è¿è¡Œæ–¹å¼"></a>ğŸƒâ€â™‚ï¸ å››ã€è¿è¡Œæ–¹å¼</h2><p>pytestæä¾›äº†å¤šç§è¿è¡Œæµ‹è¯•çš„æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹å¼ã€‚</p>
<h3 id="4-1-åŸºæœ¬è¿è¡Œå‘½ä»¤"><a href="#4-1-åŸºæœ¬è¿è¡Œå‘½ä»¤" class="headerlink" title="4.1 åŸºæœ¬è¿è¡Œå‘½ä»¤"></a>4.1 åŸºæœ¬è¿è¡Œå‘½ä»¤</h3><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è¿è¡Œå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æµ‹è¯•</span>
pytest

<span class="token comment"># è¿è¡Œç‰¹å®šæ–‡ä»¶</span>
pytest test_auth.py

<span class="token comment"># è¿è¡Œç‰¹å®šå‡½æ•°</span>
pytest test_auth.py::test_login_success

<span class="token comment"># è¿è¡Œç‰¹å®šç±»</span>
pytest test_auth.py::TestAuth

<span class="token comment"># è¿è¡Œç±»ä¸­çš„ç‰¹å®šæ–¹æ³•</span>
pytest test_auth.py::TestAuth::test_login<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="4-2-è¿è¡Œå‚æ•°è¯¦è§£"><a href="#4-2-è¿è¡Œå‚æ•°è¯¦è§£" class="headerlink" title="4.2 è¿è¡Œå‚æ•°è¯¦è§£"></a>4.2 è¿è¡Œå‚æ•°è¯¦è§£</h3><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>-v</code></td>
<td>è¯¦ç»†æ¨¡å¼ï¼Œæ˜¾ç¤ºæ›´å¤šä¿¡æ¯</td>
<td><code>pytest -v</code></td>
</tr>
<tr>
<td><code>-s</code></td>
<td>æ˜¾ç¤ºæ ‡å‡†è¾“å‡ºï¼ˆåŒ…æ‹¬printè¯­å¥ï¼‰</td>
<td><code>pytest -s</code></td>
</tr>
<tr>
<td><code>-x</code></td>
<td>ç¬¬ä¸€ä¸ªå¤±è´¥æ—¶åœæ­¢æµ‹è¯•</td>
<td><code>pytest -x</code></td>
</tr>
<tr>
<td><code>-k</code></td>
<td>æ ¹æ®è¡¨è¾¾å¼é€‰æ‹©æµ‹è¯•</td>
<td><code>pytest -k &quot;login and not invalid&quot;</code></td>
</tr>
<tr>
<td><code>-m</code></td>
<td>è¿è¡Œæ ‡è®°çš„æµ‹è¯•</td>
<td><code>pytest -m smoke</code></td>
</tr>
<tr>
<td><code>-n</code></td>
<td>å¹¶è¡Œè¿è¡Œæµ‹è¯•</td>
<td><code>pytest -n 4</code></td>
</tr>
<tr>
<td><code>--html</code></td>
<td>ç”ŸæˆHTMLæŠ¥å‘Š</td>
<td><code>pytest --html=report.html</code></td>
</tr>
<tr>
<td><code>--alluredir</code></td>
<td>ç”ŸæˆAllureæŠ¥å‘Šæ•°æ®</td>
<td><code>pytest --alluredir=./allure-results</code></td>
</tr>
</tbody></table>
<h3 id="4-3-é…ç½®æ–‡ä»¶è¿è¡Œ"><a href="#4-3-é…ç½®æ–‡ä»¶è¿è¡Œ" class="headerlink" title="4.3 é…ç½®æ–‡ä»¶è¿è¡Œ"></a>4.3 é…ç½®æ–‡ä»¶è¿è¡Œ</h3><p>åˆ›å»º<code>pytest.ini</code>é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥è®¾ç½®é»˜è®¤å‚æ•°å’Œè¡Œä¸ºï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">pytest</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">addopts</span> <span class="token punctuation">=</span> <span class="token value attr-value">-v --html=report.html --self-contained-html</span>
<span class="token key attr-name">markers</span> <span class="token punctuation">=</span>
    smoke: å†’çƒŸæµ‹è¯•ç”¨ä¾‹
    regression: å›å½’æµ‹è¯•ç”¨ä¾‹
    slow: æ‰§è¡Œæ—¶é—´è¾ƒé•¿çš„æµ‹è¯•
<span class="token key attr-name">python_files</span> <span class="token punctuation">=</span> <span class="token value attr-value">test_*.py</span>
<span class="token key attr-name">python_classes</span> <span class="token punctuation">=</span> <span class="token value attr-value">Test*</span>
<span class="token key attr-name">python_functions</span> <span class="token punctuation">=</span> <span class="token value attr-value">test_*</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p>è¿™æ ·åœ¨è¿è¡Œ<code>pytest</code>æ—¶å°±ä¼šè‡ªåŠ¨åº”ç”¨è¿™äº›é…ç½®ã€‚</p>
<h2 id="ğŸ”„-äº”ã€æ‰§è¡Œé¡ºåº"><a href="#ğŸ”„-äº”ã€æ‰§è¡Œé¡ºåº" class="headerlink" title="ğŸ”„ äº”ã€æ‰§è¡Œé¡ºåº"></a>ğŸ”„ äº”ã€æ‰§è¡Œé¡ºåº</h2><p>pytestæœ‰é»˜è®¤çš„æµ‹è¯•æ‰§è¡Œé¡ºåºï¼Œä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ§åˆ¶æµ‹è¯•çš„æ‰§è¡Œé¡ºåºã€‚</p>
<h3 id="5-1-é»˜è®¤æ‰§è¡Œé¡ºåº"><a href="#5-1-é»˜è®¤æ‰§è¡Œé¡ºåº" class="headerlink" title="5.1 é»˜è®¤æ‰§è¡Œé¡ºåº"></a>5.1 é»˜è®¤æ‰§è¡Œé¡ºåº</h3><p>pytesté»˜è®¤æŒ‰ç…§ä»¥ä¸‹è§„åˆ™ç¡®å®šæ‰§è¡Œé¡ºåºï¼š</p>
<ol>
<li>æŒ‰æ–‡ä»¶åç§°çš„å­—å…¸åº</li>
<li>åŒä¸€æ–‡ä»¶å†…æŒ‰æµ‹è¯•å‡½æ•°&#x2F;ç±»åçš„å­—å…¸åº</li>
<li>ç±»ä¸­çš„æµ‹è¯•æ–¹æ³•æŒ‰åç§°çš„å­—å…¸åº</li>
</ol>
<h3 id="5-2-æ§åˆ¶æ‰§è¡Œé¡ºåºçš„æ–¹æ³•"><a href="#5-2-æ§åˆ¶æ‰§è¡Œé¡ºåºçš„æ–¹æ³•" class="headerlink" title="5.2 æ§åˆ¶æ‰§è¡Œé¡ºåºçš„æ–¹æ³•"></a>5.2 æ§åˆ¶æ‰§è¡Œé¡ºåºçš„æ–¹æ³•</h3><h4 id="5-2-1-ä½¿ç”¨pytest-orderingæ’ä»¶"><a href="#5-2-1-ä½¿ç”¨pytest-orderingæ’ä»¶" class="headerlink" title="5.2.1 ä½¿ç”¨pytest-orderingæ’ä»¶"></a>5.2.1 ä½¿ç”¨pytest-orderingæ’ä»¶</h4><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip <span class="token function">install</span> pytest-ordering<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pytest

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>run</span><span class="token punctuation">(</span>order<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å…ˆæ‰§è¡Œç™»å½•æµ‹è¯•"</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>run</span><span class="token punctuation">(</span>order<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_user_profile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å†æ‰§è¡Œç”¨æˆ·èµ„æ–™æµ‹è¯•"</span><span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>run</span><span class="token punctuation">(</span>order<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æœ€åæ‰§è¡Œç™»å‡ºæµ‹è¯•"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h4 id="5-2-2-ä½¿ç”¨fixtureçš„ä¾èµ–å…³ç³»"><a href="#5-2-2-ä½¿ç”¨fixtureçš„ä¾èµ–å…³ç³»" class="headerlink" title="5.2.2 ä½¿ç”¨fixtureçš„ä¾èµ–å…³ç³»"></a>5.2.2 ä½¿ç”¨fixtureçš„ä¾èµ–å…³ç³»</h4><p>é€šè¿‡fixtureçš„ä¾èµ–å…³ç³»ä¹Ÿå¯ä»¥é—´æ¥æ§åˆ¶æµ‹è¯•æ‰§è¡Œé¡ºåºï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span>
<span class="token keyword">def</span> <span class="token function">setup_login</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ç™»å½•å‡†å¤‡"</span><span class="token punctuation">)</span>
    <span class="token comment"># ç™»å½•æ“ä½œ</span>
    <span class="token keyword">return</span> <span class="token string">"token"</span>

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span>
<span class="token keyword">def</span> <span class="token function">setup_profile</span><span class="token punctuation">(</span>setup_login<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·èµ„æ–™å‡†å¤‡"</span><span class="token punctuation">)</span>
    <span class="token comment"># ä½¿ç”¨ç™»å½•token</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token string">"user_id"</span><span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">&#125;</span>

<span class="token keyword">def</span> <span class="token function">test_user_info</span><span class="token punctuation">(</span>setup_profile<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•ç”¨æˆ·ä¿¡æ¯"</span><span class="token punctuation">)</span>
    <span class="token keyword">assert</span> setup_profile<span class="token punctuation">[</span><span class="token string">"user_id"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">123</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šè¿‡åº¦ä¾èµ–æµ‹è¯•æ‰§è¡Œé¡ºåºå¯èƒ½å¯¼è‡´æµ‹è¯•çš„è„†å¼±æ€§ï¼Œåº”è¯¥å°½é‡ä¿æŒæµ‹è¯•çš„ç‹¬ç«‹æ€§ã€‚</p>
</blockquote>
<h2 id="ğŸ“¦-å…­ã€åˆ†ç»„æ‰§è¡Œ"><a href="#ğŸ“¦-å…­ã€åˆ†ç»„æ‰§è¡Œ" class="headerlink" title="ğŸ“¦ å…­ã€åˆ†ç»„æ‰§è¡Œ"></a>ğŸ“¦ å…­ã€åˆ†ç»„æ‰§è¡Œ</h2><p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å°†æµ‹è¯•åˆ†ç»„ï¼Œä»¥ä¾¿åœ¨ä¸åŒåœºæ™¯ä¸‹è¿è¡Œç‰¹å®šçš„æµ‹è¯•é›†ã€‚</p>
<h3 id="6-1-ä½¿ç”¨markæ ‡è®°è¿›è¡Œåˆ†ç»„"><a href="#6-1-ä½¿ç”¨markæ ‡è®°è¿›è¡Œåˆ†ç»„" class="headerlink" title="6.1 ä½¿ç”¨markæ ‡è®°è¿›è¡Œåˆ†ç»„"></a>6.1 ä½¿ç”¨markæ ‡è®°è¿›è¡Œåˆ†ç»„</h3><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pytest

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>smoke</span>
<span class="token keyword">def</span> <span class="token function">test_critical_feature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""å…³é”®åŠŸèƒ½å†’çƒŸæµ‹è¯•"""</span>
    <span class="token keyword">assert</span> <span class="token boolean">True</span>

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>regression</span>
<span class="token keyword">def</span> <span class="token function">test_basic_function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""åŸºç¡€åŠŸèƒ½å›å½’æµ‹è¯•"""</span>
    <span class="token keyword">assert</span> <span class="token boolean">True</span>

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>slow</span>
<span class="token keyword">def</span> <span class="token function">test_performance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""æ€§èƒ½æµ‹è¯•"""</span>
    <span class="token keyword">assert</span> <span class="token boolean">True</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="6-2-è¿è¡Œç‰¹å®šåˆ†ç»„çš„æµ‹è¯•"><a href="#6-2-è¿è¡Œç‰¹å®šåˆ†ç»„çš„æµ‹è¯•" class="headerlink" title="6.2 è¿è¡Œç‰¹å®šåˆ†ç»„çš„æµ‹è¯•"></a>6.2 è¿è¡Œç‰¹å®šåˆ†ç»„çš„æµ‹è¯•</h3><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è¿è¡Œå†’çƒŸæµ‹è¯•</span>
pytest <span class="token parameter variable">-m</span> smoke

<span class="token comment"># è¿è¡Œå›å½’æµ‹è¯•</span>
pytest <span class="token parameter variable">-m</span> regression

<span class="token comment"># è¿è¡Œå†’çƒŸæµ‹è¯•ä½†æ’é™¤æ…¢æµ‹è¯•</span>
pytest <span class="token parameter variable">-m</span> <span class="token string">"smoke and not slow"</span>

<span class="token comment"># è¿è¡Œå†’çƒŸæˆ–å›å½’æµ‹è¯•</span>
pytest <span class="token parameter variable">-m</span> <span class="token string">"smoke or regression"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="6-3-å·¥ä½œæµç¨‹å»ºè®®"><a href="#6-3-å·¥ä½œæµç¨‹å»ºè®®" class="headerlink" title="6.3 å·¥ä½œæµç¨‹å»ºè®®"></a>6.3 å·¥ä½œæµç¨‹å»ºè®®</h3><p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘å»ºè®®è¿™æ ·ç»„ç»‡æµ‹è¯•æ‰§è¡Œæµç¨‹ï¼š</p>
<ol>
<li><strong>ä»£ç æäº¤å‰</strong>ï¼šè¿è¡Œ<code>pytest -m smoke</code>ç¡®ä¿åŸºæœ¬åŠŸèƒ½æ­£å¸¸</li>
<li><strong>æ¯æ—¥æ„å»º</strong>ï¼šè¿è¡Œ<code>pytest -m &quot;smoke or critical&quot;</code></li>
<li><strong>å¤œé—´æ„å»º</strong>ï¼šè¿è¡Œæ‰€æœ‰æµ‹è¯•<code>pytest</code></li>
<li><strong>å‘å¸ƒå‰</strong>ï¼šè¿è¡Œå®Œæ•´çš„å›å½’æµ‹è¯•<code>pytest -m regression</code></li>
</ol>
<h2 id="â­ï¸-ä¸ƒã€è·³è¿‡æœºåˆ¶"><a href="#â­ï¸-ä¸ƒã€è·³è¿‡æœºåˆ¶" class="headerlink" title="â­ï¸ ä¸ƒã€è·³è¿‡æœºåˆ¶"></a>â­ï¸ ä¸ƒã€è·³è¿‡æœºåˆ¶</h2><p>åœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ ¹æ®æŸäº›æ¡ä»¶è·³è¿‡ç‰¹å®šçš„æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<h3 id="7-1-æ— æ¡ä»¶è·³è¿‡"><a href="#7-1-æ— æ¡ä»¶è·³è¿‡" class="headerlink" title="7.1 æ— æ¡ä»¶è·³è¿‡"></a>7.1 æ— æ¡ä»¶è·³è¿‡</h3><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pytest

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>skip</span><span class="token punctuation">(</span>reason<span class="token operator">=</span><span class="token string">"åŠŸèƒ½å°šæœªå®ç°"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_not_implemented</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""è·³è¿‡æœªå®ç°çš„åŠŸèƒ½æµ‹è¯•"""</span>
    <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="7-2-æœ‰æ¡ä»¶è·³è¿‡"><a href="#7-2-æœ‰æ¡ä»¶è·³è¿‡" class="headerlink" title="7.2 æœ‰æ¡ä»¶è·³è¿‡"></a>7.2 æœ‰æ¡ä»¶è·³è¿‡</h3><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pytest
<span class="token keyword">import</span> sys

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>skipif</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>version_info <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> reason<span class="token operator">=</span><span class="token string">"éœ€è¦Python 3.8æˆ–æ›´é«˜ç‰ˆæœ¬"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_new_feature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""ä»…åœ¨Python 3.8+ç¯å¢ƒä¸­è¿è¡Œçš„æµ‹è¯•"""</span>
    <span class="token comment"># ä½¿ç”¨Python 3.8+çš„æ–°ç‰¹æ€§</span>
    <span class="token keyword">assert</span> <span class="token boolean">True</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="7-3-é¢„æœŸå¤±è´¥"><a href="#7-3-é¢„æœŸå¤±è´¥" class="headerlink" title="7.3 é¢„æœŸå¤±è´¥"></a>7.3 é¢„æœŸå¤±è´¥</h3><p>å¯¹äºå·²çŸ¥æœ‰é—®é¢˜ä½†åˆä¸æƒ³æ ‡è®°ä¸ºè·³è¿‡çš„æµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨<code>xfail</code>ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pytest

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>xfail</span><span class="token punctuation">(</span>reason<span class="token operator">=</span><span class="token string">"å·²çŸ¥bugï¼Œå¾…ä¿®å¤"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_know_bug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""é¢„æœŸä¼šå¤±è´¥çš„æµ‹è¯•"""</span>
    <span class="token keyword">assert</span> <span class="token boolean">False</span>  <span class="token comment"># è¿™ä¸ªæµ‹è¯•ä¼šè¢«è®°å½•ä¸ºxfail</span>

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>xfail</span><span class="token punctuation">(</span>raises<span class="token operator">=</span>ZeroDivisionError<span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_divide_by_zero</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""é¢„æœŸä¼šæŠ›å‡ºå¼‚å¸¸çš„æµ‹è¯•"""</span>
    <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span>  <span class="token comment"># è¿™ä¸ªæµ‹è¯•ä¼šé€šè¿‡ï¼Œå› ä¸ºå®ƒæŒ‰é¢„æœŸæŠ›å‡ºäº†å¼‚å¸¸</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="ğŸ› ï¸-å…«ã€fixtureså‰åç½®å¤„ç†"><a href="#ğŸ› ï¸-å…«ã€fixtureså‰åç½®å¤„ç†" class="headerlink" title="ğŸ› ï¸ å…«ã€fixtureså‰åç½®å¤„ç†"></a>ğŸ› ï¸ å…«ã€fixtureså‰åç½®å¤„ç†</h2><p>fixturesæ˜¯pytestä¸­å®ç°å‰åç½®å¤„ç†çš„å¼ºå¤§æœºåˆ¶ï¼Œæ¯”ä¼ ç»Ÿçš„setup&#x2F;teardownæ›´çµæ´»ã€‚</p>
<h3 id="8-1-åŸºæœ¬çš„å‰åç½®å¤„ç†"><a href="#8-1-åŸºæœ¬çš„å‰åç½®å¤„ç†" class="headerlink" title="8.1 åŸºæœ¬çš„å‰åç½®å¤„ç†"></a>8.1 åŸºæœ¬çš„å‰åç½®å¤„ç†</h3><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pytest

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span>
<span class="token keyword">def</span> <span class="token function">resource_setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># å‰ç½®å¤„ç†</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"èµ„æºå‡†å¤‡ä¸­..."</span><span class="token punctuation">)</span>
    resource <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"ready"</span><span class="token punctuation">&#125;</span>
    
    <span class="token keyword">yield</span> resource  <span class="token comment"># è¿”å›èµ„æºç»™æµ‹è¯•å‡½æ•°</span>
    
    <span class="token comment"># åç½®å¤„ç†</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"èµ„æºæ¸…ç†ä¸­..."</span><span class="token punctuation">)</span>
    resource<span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"cleaned"</span>

<span class="token keyword">def</span> <span class="token function">test_with_resource</span><span class="token punctuation">(</span>resource_setup<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""ä½¿ç”¨fixtureæä¾›çš„èµ„æº"""</span>
    <span class="token keyword">assert</span> resource_setup<span class="token punctuation">[</span><span class="token string">"status"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"ready"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="8-2-å¤šä¸ªfixturesçš„ç»„åˆä½¿ç”¨"><a href="#8-2-å¤šä¸ªfixturesçš„ç»„åˆä½¿ç”¨" class="headerlink" title="8.2 å¤šä¸ªfixturesçš„ç»„åˆä½¿ç”¨"></a>8.2 å¤šä¸ªfixturesçš„ç»„åˆä½¿ç”¨</h3><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span>
<span class="token keyword">def</span> <span class="token function">db_connection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥æ•°æ®åº“"</span><span class="token punctuation">)</span>
    db <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"connected"</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">&#125;</span>
    <span class="token keyword">yield</span> db
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å…³é—­æ•°æ®åº“è¿æ¥"</span><span class="token punctuation">)</span>
    db<span class="token punctuation">[</span><span class="token string">"connected"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span>
<span class="token keyword">def</span> <span class="token function">test_data</span><span class="token punctuation">(</span>db_connection<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"å‡†å¤‡æµ‹è¯•æ•°æ®"</span><span class="token punctuation">)</span>
    <span class="token comment"># åˆ©ç”¨æ•°æ®åº“è¿æ¥å‡†å¤‡æµ‹è¯•æ•°æ®</span>
    data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">"id"</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"æµ‹è¯•ç”¨æˆ·"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
    <span class="token keyword">yield</span> data
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"æ¸…ç†æµ‹è¯•æ•°æ®"</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">test_data_access</span><span class="token punctuation">(</span>test_data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""æµ‹è¯•æ•°æ®è®¿é—®"""</span>
    <span class="token keyword">assert</span> <span class="token builtin">len</span><span class="token punctuation">(</span>test_data<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="8-3-è‡ªåŠ¨åº”ç”¨çš„fixtures"><a href="#8-3-è‡ªåŠ¨åº”ç”¨çš„fixtures" class="headerlink" title="8.3 è‡ªåŠ¨åº”ç”¨çš„fixtures"></a>8.3 è‡ªåŠ¨åº”ç”¨çš„fixtures</h3><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span>autouse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> scope<span class="token operator">=</span><span class="token string">"function"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">log_test_execution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""è‡ªåŠ¨åº”ç”¨çš„fixtureï¼Œè®°å½•æ¯ä¸ªæµ‹è¯•å‡½æ•°çš„æ‰§è¡Œ"""</span>
    <span class="token keyword">import</span> time
    start_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æµ‹è¯•å¼€å§‹æ‰§è¡Œ"</span></span><span class="token punctuation">)</span>
    <span class="token keyword">yield</span>
    end_time <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æµ‹è¯•æ‰§è¡Œå®Œæˆï¼Œè€—æ—¶: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>end_time <span class="token operator">-</span> start_time<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">&#125;</span></span><span class="token string">ç§’"</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="âœ…-ä¹ã€æ–­è¨€"><a href="#âœ…-ä¹ã€æ–­è¨€" class="headerlink" title="âœ… ä¹ã€æ–­è¨€"></a>âœ… ä¹ã€æ–­è¨€</h2><p>æ–­è¨€æ˜¯æµ‹è¯•ç”¨ä¾‹çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œpytestæä¾›äº†çµæ´»å¼ºå¤§çš„æ–­è¨€æœºåˆ¶ã€‚</p>
<h3 id="9-1-åŸºæœ¬æ–­è¨€"><a href="#9-1-åŸºæœ¬æ–­è¨€" class="headerlink" title="9.1 åŸºæœ¬æ–­è¨€"></a>9.1 åŸºæœ¬æ–­è¨€</h3><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">test_basic_assertions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># åŸºæœ¬æ–­è¨€</span>
    <span class="token keyword">assert</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">2</span>
    
    <span class="token comment"># å­—ç¬¦ä¸²æ–­è¨€</span>
    text <span class="token operator">=</span> <span class="token string">"pytest is awesome"</span>
    <span class="token keyword">assert</span> <span class="token string">"awesome"</span> <span class="token keyword">in</span> text
    <span class="token keyword">assert</span> text<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">"pytest"</span><span class="token punctuation">)</span>
    
    <span class="token comment"># åˆ—è¡¨æ–­è¨€</span>
    numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
    <span class="token keyword">assert</span> <span class="token number">3</span> <span class="token keyword">in</span> numbers
    <span class="token keyword">assert</span> <span class="token builtin">len</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">5</span>
    
    <span class="token comment"># å­—å…¸æ–­è¨€</span>
    user <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"ç™¾é‡Œ"</span><span class="token punctuation">,</span> <span class="token string">"age"</span><span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">&#125;</span>
    <span class="token keyword">assert</span> user<span class="token punctuation">[</span><span class="token string">"name"</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"ç™¾é‡Œ"</span>
    <span class="token keyword">assert</span> <span class="token string">"age"</span> <span class="token keyword">in</span> user<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="9-2-å¼‚å¸¸æ–­è¨€"><a href="#9-2-å¼‚å¸¸æ–­è¨€" class="headerlink" title="9.2 å¼‚å¸¸æ–­è¨€"></a>9.2 å¼‚å¸¸æ–­è¨€</h3><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">test_exceptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># æ–­è¨€ä¼šæŠ›å‡ºæŒ‡å®šå¼‚å¸¸</span>
    <span class="token keyword">with</span> pytest<span class="token punctuation">.</span>raises<span class="token punctuation">(</span>ValueError<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">"not a number"</span><span class="token punctuation">)</span>
    
    <span class="token comment"># æ–­è¨€å¼‚å¸¸æ¶ˆæ¯</span>
    <span class="token keyword">with</span> pytest<span class="token punctuation">.</span>raises<span class="token punctuation">(</span>ValueError<span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token operator">=</span><span class="token string">"invalid literal"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">"not a number"</span><span class="token punctuation">)</span>
    
    <span class="token comment"># æ•è·å¼‚å¸¸å¹¶è¿›è¡Œæ›´è¯¦ç»†çš„éªŒè¯</span>
    <span class="token keyword">with</span> pytest<span class="token punctuation">.</span>raises<span class="token punctuation">(</span>ValueError<span class="token punctuation">)</span> <span class="token keyword">as</span> excinfo<span class="token punctuation">:</span>
        <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">"not a number"</span><span class="token punctuation">)</span>
    <span class="token keyword">assert</span> <span class="token string">"invalid literal"</span> <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">(</span>excinfo<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="9-3-è‡ªå®šä¹‰æ–­è¨€æ¶ˆæ¯"><a href="#9-3-è‡ªå®šä¹‰æ–­è¨€æ¶ˆæ¯" class="headerlink" title="9.3 è‡ªå®šä¹‰æ–­è¨€æ¶ˆæ¯"></a>9.3 è‡ªå®šä¹‰æ–­è¨€æ¶ˆæ¯</h3><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">test_with_custom_message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> <span class="token number">5</span>
    expected <span class="token operator">=</span> <span class="token number">6</span>
    <span class="token keyword">assert</span> result <span class="token operator">==</span> expected<span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f"è®¡ç®—ç»“æœé”™è¯¯ï¼Œå®é™…: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>result<span class="token punctuation">&#125;</span></span><span class="token string">, é¢„æœŸ: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>expected<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="ğŸ“Š-åã€AllureæŠ¥å‘Šç”Ÿæˆ"><a href="#ğŸ“Š-åã€AllureæŠ¥å‘Šç”Ÿæˆ" class="headerlink" title="ğŸ“Š åã€AllureæŠ¥å‘Šç”Ÿæˆ"></a>ğŸ“Š åã€AllureæŠ¥å‘Šç”Ÿæˆ</h2><p>Allureæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æµ‹è¯•æŠ¥å‘Šæ¡†æ¶ï¼Œå¯ä»¥ç”Ÿæˆç¾è§‚ã€ä¿¡æ¯ä¸°å¯Œçš„HTMLæµ‹è¯•æŠ¥å‘Šã€‚</p>
<h3 id="10-1-Allureç¯å¢ƒæ­å»º"><a href="#10-1-Allureç¯å¢ƒæ­å»º" class="headerlink" title="10.1 Allureç¯å¢ƒæ­å»º"></a>10.1 Allureç¯å¢ƒæ­å»º</h3><ol>
<li><p><strong>å®‰è£…Allureå‘½ä»¤è¡Œå·¥å…·</strong></p>
<ul>
<li>ä»<a target="_blank" rel="noopener" href="https://github.com/allure-framework/allure2/releases">GitHub Releases</a>ä¸‹è½½æœ€æ–°ç‰ˆæœ¬</li>
<li>è§£å‹å¹¶é…ç½®ç¯å¢ƒå˜é‡</li>
<li>éªŒè¯å®‰è£…ï¼š<code>allure --version</code></li>
</ul>
</li>
<li><p><strong>å®‰è£…pytestæ’ä»¶</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip <span class="token function">install</span> allure-pytest<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div></figure></li>
</ol>
<h3 id="10-2-ç”ŸæˆAllureæŠ¥å‘Šçš„å®Œæ•´æµç¨‹"><a href="#10-2-ç”ŸæˆAllureæŠ¥å‘Šçš„å®Œæ•´æµç¨‹" class="headerlink" title="10.2 ç”ŸæˆAllureæŠ¥å‘Šçš„å®Œæ•´æµç¨‹"></a>10.2 ç”ŸæˆAllureæŠ¥å‘Šçš„å®Œæ•´æµç¨‹</h3><figure><div class="code-wrapper"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ­¥éª¤1ï¼šæ‰§è¡Œæµ‹è¯•å¹¶ç”Ÿæˆä¸´æ—¶JSONæŠ¥å‘Š</span>
pytest <span class="token parameter variable">--alluredir</span><span class="token operator">=</span>./temp

<span class="token comment"># æ­¥éª¤2ï¼šä»JSONç”ŸæˆHTMLæŠ¥å‘Š</span>
allure generate ./temp <span class="token parameter variable">-o</span> ./report <span class="token parameter variable">--clean</span>

<span class="token comment"># æ­¥éª¤3ï¼šæŸ¥çœ‹æŠ¥å‘Šï¼ˆè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼‰</span>
allure <span class="token function">open</span> ./report<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="10-3-ä»£ç é›†æˆæ–¹æ¡ˆ"><a href="#10-3-ä»£ç é›†æˆæ–¹æ¡ˆ" class="headerlink" title="10.3 ä»£ç é›†æˆæ–¹æ¡ˆ"></a>10.3 ä»£ç é›†æˆæ–¹æ¡ˆ</h3><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pytest
<span class="token keyword">import</span> os

<span class="token keyword">def</span> <span class="token function">test_example</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">assert</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">2</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># ç”Ÿæˆä¸´æ—¶æŠ¥å‘Š</span>
    pytest<span class="token punctuation">.</span>main<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"--alluredir=./temp"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># ç”ŸæˆHTMLæŠ¥å‘Š</span>
    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">"allure generate ./temp -o ./report --clean"</span><span class="token punctuation">)</span>
    <span class="token comment"># è‡ªåŠ¨æ‰“å¼€æŠ¥å‘Šï¼ˆå¯é€‰ï¼‰</span>
    os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">"allure open ./report"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="10-4-CI-CDé›†æˆæŠ€å·§"><a href="#10-4-CI-CDé›†æˆæŠ€å·§" class="headerlink" title="10.4 CI&#x2F;CDé›†æˆæŠ€å·§"></a>10.4 CI&#x2F;CDé›†æˆæŠ€å·§</h3><p>åœ¨CI&#x2F;CDç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é›†æˆAllureæŠ¥å‘Šï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># conftest.py ä¸­æ·»åŠ CIç¯å¢ƒæ£€æµ‹</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>fixture</span><span class="token punctuation">(</span>scope<span class="token operator">=</span><span class="token string">"session"</span><span class="token punctuation">,</span> autouse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">allure_ci_report</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># è·å–ç¯å¢ƒå˜é‡ä¸­çš„BUILD_URL</span>
    build_url <span class="token operator">=</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"BUILD_URL"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> build_url<span class="token punctuation">:</span>
        <span class="token comment"># åœ¨æŠ¥å‘Šä¸­æ·»åŠ æ„å»ºé“¾æ¥</span>
        allure<span class="token punctuation">.</span>environment<span class="token punctuation">(</span>build_url<span class="token operator">=</span>build_url<span class="token punctuation">)</span>
        
        <span class="token comment"># æ·»åŠ AllureæŠ¥å‘Šé“¾æ¥åˆ°æ„å»ºé¡µé¢ï¼ˆJenkinsç­‰CIå·¥å…·ï¼‰</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"&lt;p>&lt;a href="</span></span><span class="token punctuation">&#123;</span>build_url<span class="token punctuation">&#125;</span>allure<span class="token operator">-</span>report<span class="token string">">æŸ¥çœ‹AllureæŠ¥å‘Š&lt;/a>&lt;/p>"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="10-5-AllureæŠ¥å‘Šçš„æ ¸å¿ƒç‰¹æ€§"><a href="#10-5-AllureæŠ¥å‘Šçš„æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="10.5 AllureæŠ¥å‘Šçš„æ ¸å¿ƒç‰¹æ€§"></a>10.5 AllureæŠ¥å‘Šçš„æ ¸å¿ƒç‰¹æ€§</h3><p>âœ… <strong>å¯è§†åŒ–ç»“æœ</strong>ï¼šç›´è§‚å±•ç¤ºæµ‹è¯•é€šè¿‡ç‡ã€æ‰§è¡Œæ—¶é—´ã€é”™è¯¯è¯¦æƒ…</p>
<p>âœ… <strong>æµ‹è¯•ç”¨ä¾‹å…³è”</strong>ï¼šæ”¯æŒä¸ºç”¨ä¾‹æ·»åŠ æ ‡ç­¾ã€ä¼˜å…ˆçº§ã€æè¿°</p>
<p>âœ… <strong>é™„ä»¶æ”¯æŒ</strong>ï¼šå¯é™„åŠ è¯·æ±‚&#x2F;å“åº”æ•°æ®ã€æˆªå›¾ã€æ—¥å¿—ç­‰è¾…åŠ©ä¿¡æ¯</p>
<p>âœ… <strong>è¶‹åŠ¿åˆ†æ</strong>ï¼šå¤šè½®æµ‹è¯•ç»“æœå¯¹æ¯”ï¼Œå±•ç¤ºè´¨é‡å˜åŒ–è¶‹åŠ¿</p>
<p>âœ… <strong>ç¯å¢ƒä¿¡æ¯</strong>ï¼šè®°å½•æµ‹è¯•æ‰§è¡Œç¯å¢ƒï¼Œä¾¿äºé—®é¢˜å¤ç°</p>
<blockquote>
<p>ğŸ’¡ å°æŠ€å·§ï¼šåœ¨Jenkinsä¸­é›†æˆAllureæ—¶ï¼Œå¯ä»¥åœ¨æ„å»ºé¡µé¢ç›´æ¥åµŒå…¥AllureæŠ¥å‘Šçš„é“¾æ¥ï¼Œæ–¹ä¾¿å›¢é˜Ÿæˆå‘˜å¿«é€ŸæŸ¥çœ‹æµ‹è¯•ç»“æœã€‚</p>
</blockquote>
<h2 id="ğŸ”„-åä¸€ã€æ•°æ®é©±åŠ¨æµ‹è¯•"><a href="#ğŸ”„-åä¸€ã€æ•°æ®é©±åŠ¨æµ‹è¯•" class="headerlink" title="ğŸ”„ åä¸€ã€æ•°æ®é©±åŠ¨æµ‹è¯•"></a>ğŸ”„ åä¸€ã€æ•°æ®é©±åŠ¨æµ‹è¯•</h2><p>æ•°æ®é©±åŠ¨æµ‹è¯•æ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€ï¼Œpytesté€šè¿‡<code>@pytest.mark.parametrize</code>è£…é¥°å™¨æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚</p>
<h3 id="11-1-å‚æ•°åŒ–æµ‹è¯•çš„åŸºç¡€ç”¨æ³•"><a href="#11-1-å‚æ•°åŒ–æµ‹è¯•çš„åŸºç¡€ç”¨æ³•" class="headerlink" title="11.1 å‚æ•°åŒ–æµ‹è¯•çš„åŸºç¡€ç”¨æ³•"></a>11.1 å‚æ•°åŒ–æµ‹è¯•çš„åŸºç¡€ç”¨æ³•</h3><figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pytest

<span class="token comment"># å•å‚æ•°æµ‹è¯•</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"ç™¾é‡Œ"</span><span class="token punctuation">,</span> <span class="token string">"æ˜Ÿç‘¶"</span><span class="token punctuation">,</span> <span class="token string">"ä¾ç„¶"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_login</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">assert</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"æµ‹è¯•ç”¨æˆ·: </span><span class="token interpolation"><span class="token punctuation">&#123;</span>username<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

<span class="token comment"># å¤šå‚æ•°æµ‹è¯•</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span><span class="token string">"name, age, expected"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment"># æˆå¹´äºº</span>
    <span class="token punctuation">(</span><span class="token string">"æå››"</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># æœªæˆå¹´äºº</span>
    <span class="token punctuation">(</span><span class="token string">"ç‹äº”"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>    <span class="token comment"># åˆšå¥½æˆå¹´</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_adult_check</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> age <span class="token operator">>=</span> <span class="token number">18</span>
    <span class="token keyword">assert</span> result <span class="token operator">==</span> expected<span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">&#123;</span>name<span class="token punctuation">&#125;</span></span><span class="token string">çš„å¹´é¾„æ£€æŸ¥å¤±è´¥"</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="11-2-é«˜çº§å‚æ•°åŒ–æŠ€å·§"><a href="#11-2-é«˜çº§å‚æ•°åŒ–æŠ€å·§" class="headerlink" title="11.2 é«˜çº§å‚æ•°åŒ–æŠ€å·§"></a>11.2 é«˜çº§å‚æ•°åŒ–æŠ€å·§</h3><h4 id="11-2-1-æµ‹è¯•ç”¨ä¾‹IDå®šåˆ¶"><a href="#11-2-1-æµ‹è¯•ç”¨ä¾‹IDå®šåˆ¶" class="headerlink" title="11.2.1 æµ‹è¯•ç”¨ä¾‹IDå®šåˆ¶"></a>11.2.1 æµ‹è¯•ç”¨ä¾‹IDå®šåˆ¶</h4><p>ä¸ºæµ‹è¯•ç”¨ä¾‹æ·»åŠ æœ‰æ„ä¹‰çš„IDï¼Œè®©æµ‹è¯•æŠ¥å‘Šæ›´æ¸…æ™°ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span>
    <span class="token string">"input_data, expected"</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span> <span class="token string">"HELLO"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">,</span> <span class="token string">"WORLD"</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    ids<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"æ­£å¸¸å­—ç¬¦ä¸²è½¬å¤§å†™"</span><span class="token punctuation">,</span> <span class="token string">"ç‰¹æ®Šå­—ç¬¦è½¬å¤§å†™"</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_string_upper</span><span class="token punctuation">(</span>input_data<span class="token punctuation">,</span> expected<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">assert</span> input_data<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> expected<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h4 id="11-2-2-å¤šè£…é¥°å™¨ç»„åˆ"><a href="#11-2-2-å¤šè£…é¥°å™¨ç»„åˆ" class="headerlink" title="11.2.2 å¤šè£…é¥°å™¨ç»„åˆ"></a>11.2.2 å¤šè£…é¥°å™¨ç»„åˆ</h4><p>å¯ä»¥å åŠ å¤šä¸ªparametrizeè£…é¥°å™¨ï¼Œç”Ÿæˆå‚æ•°çš„ç¬›å¡å°”ç§¯ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span><span class="token string">"browser"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"chrome"</span><span class="token punctuation">,</span> <span class="token string">"firefox"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span><span class="token string">"env"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"dev"</span><span class="token punctuation">,</span> <span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token string">"prod"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_cross_browser</span><span class="token punctuation">(</span>browser<span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"åœ¨</span><span class="token interpolation"><span class="token punctuation">&#123;</span>env<span class="token punctuation">&#125;</span></span><span class="token string">ç¯å¢ƒä½¿ç”¨</span><span class="token interpolation"><span class="token punctuation">&#123;</span>browser<span class="token punctuation">&#125;</span></span><span class="token string">æµè§ˆå™¨æµ‹è¯•"</span></span><span class="token punctuation">)</span>
    <span class="token comment"># è¿™å°†ç”Ÿæˆ6ä¸ªæµ‹è¯•ç”¨ä¾‹ç»„åˆ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h2 id="ğŸ“-åäºŒã€YAMLæ–‡ä»¶è¯¦è§£"><a href="#ğŸ“-åäºŒã€YAMLæ–‡ä»¶è¯¦è§£" class="headerlink" title="ğŸ“ åäºŒã€YAMLæ–‡ä»¶è¯¦è§£"></a>ğŸ“ åäºŒã€YAMLæ–‡ä»¶è¯¦è§£</h2><p>YAMLä½œä¸ºä¸€ç§äººç±»å¯è¯»çš„æ•°æ®åºåˆ—åŒ–æ ¼å¼ï¼Œéå¸¸é€‚åˆç”¨äºæ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p>
<h3 id="12-1-YAMLåŸºç¡€å›é¡¾"><a href="#12-1-YAMLåŸºç¡€å›é¡¾" class="headerlink" title="12.1 YAMLåŸºç¡€å›é¡¾"></a>12.1 YAMLåŸºç¡€å›é¡¾</h3><p><strong>æ ¸å¿ƒè¯­æ³•ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å¤§å°å†™æ•æ„Ÿ</li>
<li>é€šè¿‡ç¼©è¿›è¡¨ç¤ºå±‚çº§ï¼ˆä»…ç”¨ç©ºæ ¼ï¼Œä¸æ”¯æŒTabï¼‰</li>
<li>æ”¯æŒæ³¨é‡Šï¼ˆ#å¼€å¤´ï¼‰</li>
<li>æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼šMapã€Listã€æ ‡é‡</li>
</ul>
<p><strong>å¸¸è§æ•°æ®ç»“æ„ï¼š</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># Mapå¯¹è±¡</span>
<span class="token key atrule">user</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> ç™¾é‡Œ
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>
  <span class="token key atrule">is_admin</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># Listæ•°ç»„</span>
<span class="token key atrule">cities</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> åŒ—äº¬
  <span class="token punctuation">-</span> ä¸Šæµ·
  <span class="token punctuation">-</span> å¹¿å·

<span class="token comment"># æ•°ç»„åµŒå¥—Map</span>
<span class="token key atrule">users</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ç™¾é‡Œ
    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">38</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> å¾®å¾®
    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="12-2-YAMLä¸æ•°æ®é©±åŠ¨çš„å®Œç¾ç»“åˆ"><a href="#12-2-YAMLä¸æ•°æ®é©±åŠ¨çš„å®Œç¾ç»“åˆ" class="headerlink" title="12.2 YAMLä¸æ•°æ®é©±åŠ¨çš„å®Œç¾ç»“åˆ"></a>12.2 YAMLä¸æ•°æ®é©±åŠ¨çš„å®Œç¾ç»“åˆ</h3><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘å‘ç°å°†YAMLä½œä¸ºæµ‹è¯•æ•°æ®æ–‡ä»¶æ˜¯ä¸€ç§éå¸¸ä¼˜é›…çš„æ–¹æ¡ˆï¼š</p>
<p><strong>æµ‹è¯•æ•°æ®æ–‡ä»¶ (test_data.yaml):</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> æ­£å¸¸ç™»å½•åœºæ™¯
  <span class="token key atrule">username</span><span class="token punctuation">:</span> admin
  <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
  <span class="token key atrule">expected</span><span class="token punctuation">:</span> 
    <span class="token key atrule">code</span><span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token key atrule">message</span><span class="token punctuation">:</span> <span class="token string">"ç™»å½•æˆåŠŸ"</span>

<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> å¯†ç é”™è¯¯åœºæ™¯
  <span class="token key atrule">username</span><span class="token punctuation">:</span> admin
  <span class="token key atrule">password</span><span class="token punctuation">:</span> wrong123
  <span class="token key atrule">expected</span><span class="token punctuation">:</span>
    <span class="token key atrule">code</span><span class="token punctuation">:</span> <span class="token number">401</span>
    <span class="token key atrule">message</span><span class="token punctuation">:</span> <span class="token string">"å¯†ç é”™è¯¯"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<p><strong>æµ‹è¯•ä»£ç :</strong></p>
<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> pytest
<span class="token keyword">import</span> yaml
<span class="token keyword">import</span> requests

<span class="token keyword">def</span> <span class="token function">load_test_data</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        <span class="token keyword">return</span> yaml<span class="token punctuation">.</span>safe_load<span class="token punctuation">(</span>f<span class="token punctuation">)</span>

<span class="token decorator annotation punctuation">@pytest<span class="token punctuation">.</span>mark<span class="token punctuation">.</span>parametrize</span><span class="token punctuation">(</span><span class="token string">"test_case"</span><span class="token punctuation">,</span> load_test_data<span class="token punctuation">(</span><span class="token string">"test_data.yaml"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ids<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">test_login_api</span><span class="token punctuation">(</span>test_case<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># å‡†å¤‡æµ‹è¯•æ•°æ®</span>
    url <span class="token operator">=</span> <span class="token string">"https://api.example.com/login"</span>
    data <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        <span class="token string">"username"</span><span class="token punctuation">:</span> test_case<span class="token punctuation">[</span><span class="token string">"username"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">"password"</span><span class="token punctuation">:</span> test_case<span class="token punctuation">[</span><span class="token string">"password"</span><span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
    
    <span class="token comment"># å‘é€è¯·æ±‚</span>
    response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> json<span class="token operator">=</span>data<span class="token punctuation">)</span>
    result <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
    <span class="token comment"># éªŒè¯ç»“æœ</span>
    <span class="token keyword">assert</span> result<span class="token punctuation">[</span><span class="token string">"code"</span><span class="token punctuation">]</span> <span class="token operator">==</span> test_case<span class="token punctuation">[</span><span class="token string">"expected"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"code"</span><span class="token punctuation">]</span>
    <span class="token keyword">assert</span> result<span class="token punctuation">[</span><span class="token string">"message"</span><span class="token punctuation">]</span> <span class="token operator">==</span> test_case<span class="token punctuation">[</span><span class="token string">"expected"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"message"</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<blockquote>
<p>ğŸ’¡ å®æˆ˜ç»éªŒï¼šå°†æµ‹è¯•æ•°æ®ä¸æµ‹è¯•é€»è¾‘åˆ†ç¦»ï¼Œå¯ä»¥è®©éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½å‚ä¸æµ‹è¯•ç”¨ä¾‹çš„ç»´æŠ¤ï¼ŒåŒæ—¶æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p>
</blockquote>
<h2 id="ğŸš€-åä¸‰ã€æ¥å£è‡ªåŠ¨åŒ–åº”ç”¨"><a href="#ğŸš€-åä¸‰ã€æ¥å£è‡ªåŠ¨åŒ–åº”ç”¨" class="headerlink" title="ğŸš€ åä¸‰ã€æ¥å£è‡ªåŠ¨åŒ–åº”ç”¨"></a>ğŸš€ åä¸‰ã€æ¥å£è‡ªåŠ¨åŒ–åº”ç”¨</h2><p>åœ¨å®é™…çš„æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆå‰é¢æ‰€å­¦çš„çŸ¥è¯†ç‚¹æ„å»ºå®Œæ•´çš„æµ‹è¯•æ¡†æ¶ã€‚</p>
<h3 id="13-1-æ–­è¨€å°è£…æœ€ä½³å®è·µ"><a href="#13-1-æ–­è¨€å°è£…æœ€ä½³å®è·µ" class="headerlink" title="13.1 æ–­è¨€å°è£…æœ€ä½³å®è·µ"></a>13.1 æ–­è¨€å°è£…æœ€ä½³å®è·µ</h3><p>åœ¨ä½¿ç”¨YAMLè¿›è¡Œæ¥å£è‡ªåŠ¨åŒ–æ—¶ï¼Œæˆ‘é€šå¸¸ä¼šå°è£…ä¸€å¥—é€šç”¨çš„æ–­è¨€å·¥å…·ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># utils/assert_utils.py</span>
<span class="token keyword">def</span> <span class="token function">validate_response</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> expected_data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""æ ¹æ®YAMLä¸­çš„é¢„æœŸç»“æœéªŒè¯æ¥å£å“åº”"""</span>
    <span class="token comment"># éªŒè¯çŠ¶æ€ç </span>
    <span class="token keyword">assert</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> expected_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"status_code"</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span> \
        <span class="token string-interpolation"><span class="token string">f"çŠ¶æ€ç é”™è¯¯ï¼Œå®é™…ï¼š</span><span class="token interpolation"><span class="token punctuation">&#123;</span>response<span class="token punctuation">.</span>status_code<span class="token punctuation">&#125;</span></span><span class="token string">ï¼Œé¢„æœŸï¼š</span><span class="token interpolation"><span class="token punctuation">&#123;</span>expected_data<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'status_code'</span><span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span><span class="token string">"</span></span>
    
    <span class="token comment"># éªŒè¯å“åº”ä½“å­—æ®µ</span>
    <span class="token keyword">if</span> <span class="token string">"body"</span> <span class="token keyword">in</span> expected_data<span class="token punctuation">:</span>
        <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> expected_data<span class="token punctuation">[</span><span class="token string">"body"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">assert</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> value<span class="token punctuation">,</span> \
                <span class="token string-interpolation"><span class="token string">f"å­—æ®µ </span><span class="token interpolation"><span class="token punctuation">&#123;</span>key<span class="token punctuation">&#125;</span></span><span class="token string"> é”™è¯¯ï¼Œå®é™…ï¼š</span><span class="token interpolation"><span class="token punctuation">&#123;</span>response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">&#125;</span></span><span class="token string">ï¼Œé¢„æœŸï¼š</span><span class="token interpolation"><span class="token punctuation">&#123;</span>value<span class="token punctuation">&#125;</span></span><span class="token string">"</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="13-2-Allureå…ƒæ•°æ®ä¸YAMLç»“åˆ"><a href="#13-2-Allureå…ƒæ•°æ®ä¸YAMLç»“åˆ" class="headerlink" title="13.2 Allureå…ƒæ•°æ®ä¸YAMLç»“åˆ"></a>13.2 Allureå…ƒæ•°æ®ä¸YAMLç»“åˆ</h3><p>ä¸ºäº†ç”Ÿæˆæ›´ä¸°å¯Œçš„æµ‹è¯•æŠ¥å‘Šï¼Œæˆ‘ä¼šåœ¨YAMLä¸­æ·»åŠ Allureç›¸å…³çš„å…ƒæ•°æ®ï¼š</p>
<figure><div class="code-wrapper"><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># test_cases/api_test.yaml</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> å•†å“æŸ¥è¯¢æ¥å£
  <span class="token key atrule">allure</span><span class="token punctuation">:</span>
    <span class="token key atrule">feature</span><span class="token punctuation">:</span> å•†å“ç®¡ç†
    <span class="token key atrule">story</span><span class="token punctuation">:</span> æŸ¥è¯¢åŠŸèƒ½
    <span class="token key atrule">severity</span><span class="token punctuation">:</span> critical
    <span class="token key atrule">description</span><span class="token punctuation">:</span> éªŒè¯å•†å“æŸ¥è¯¢æ¥å£åŠŸèƒ½æ­£ç¡®æ€§
  <span class="token key atrule">url</span><span class="token punctuation">:</span> /api/products
  <span class="token key atrule">method</span><span class="token punctuation">:</span> GET
  <span class="token key atrule">params</span><span class="token punctuation">:</span> 
    <span class="token key atrule">category_id</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">expected</span><span class="token punctuation">:</span>
    <span class="token key atrule">status_code</span><span class="token punctuation">:</span> <span class="token number">200</span>
    <span class="token key atrule">body</span><span class="token punctuation">:</span>
      <span class="token key atrule">code</span><span class="token punctuation">:</span> <span class="token number">0</span>
      <span class="token key atrule">message</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<figure><div class="code-wrapper"><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># è§£æå¹¶åº”ç”¨Allureå…ƒæ•°æ®</span>
<span class="token keyword">import</span> allure
<span class="token keyword">import</span> yaml

<span class="token keyword">def</span> <span class="token function">load_test_case</span><span class="token punctuation">(</span>file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>file_path<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        <span class="token keyword">return</span> yaml<span class="token punctuation">.</span>safe_load<span class="token punctuation">(</span>f<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">run_test_case</span><span class="token punctuation">(</span><span class="token keyword">case</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># è§£æAllureå…ƒæ•°æ®</span>
    <span class="token keyword">if</span> <span class="token string">"allure"</span> <span class="token keyword">in</span> <span class="token keyword">case</span><span class="token punctuation">:</span>
        allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>feature<span class="token punctuation">(</span><span class="token keyword">case</span><span class="token punctuation">[</span><span class="token string">"allure"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"feature"</span><span class="token punctuation">,</span> <span class="token string">"æœªåˆ†ç±»"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>story<span class="token punctuation">(</span><span class="token keyword">case</span><span class="token punctuation">[</span><span class="token string">"allure"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"story"</span><span class="token punctuation">,</span> <span class="token string">"æ— æ•…äº‹"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        <span class="token comment"># ä¸¥é‡çº§åˆ«æ˜ å°„</span>
        severity_map <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            <span class="token string">"critical"</span><span class="token punctuation">:</span> allure<span class="token punctuation">.</span>severity_level<span class="token punctuation">.</span>CRITICAL<span class="token punctuation">,</span>
            <span class="token string">"normal"</span><span class="token punctuation">:</span> allure<span class="token punctuation">.</span>severity_level<span class="token punctuation">.</span>NORMAL<span class="token punctuation">,</span>
            <span class="token string">"minor"</span><span class="token punctuation">:</span> allure<span class="token punctuation">.</span>severity_level<span class="token punctuation">.</span>MINOR
        <span class="token punctuation">&#125;</span>
        allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>severity<span class="token punctuation">(</span>severity_map<span class="token punctuation">.</span>get<span class="token punctuation">(</span>
            <span class="token keyword">case</span><span class="token punctuation">[</span><span class="token string">"allure"</span><span class="token punctuation">]</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"severity"</span><span class="token punctuation">,</span> <span class="token string">"normal"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            allure<span class="token punctuation">.</span>severity_level<span class="token punctuation">.</span>NORMAL
        <span class="token punctuation">)</span><span class="token punctuation">)</span>
        
        <span class="token keyword">if</span> <span class="token string">"description"</span> <span class="token keyword">in</span> <span class="token keyword">case</span><span class="token punctuation">[</span><span class="token string">"allure"</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            allure<span class="token punctuation">.</span>dynamic<span class="token punctuation">.</span>description<span class="token punctuation">(</span><span class="token keyword">case</span><span class="token punctuation">[</span><span class="token string">"allure"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"description"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    
    <span class="token comment"># æ‰§è¡Œæ¥å£è¯·æ±‚ä¸æ–­è¨€...</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h3 id="13-3-é¡¹ç›®å®æˆ˜å»ºè®®"><a href="#13-3-é¡¹ç›®å®æˆ˜å»ºè®®" class="headerlink" title="13.3 é¡¹ç›®å®æˆ˜å»ºè®®"></a>13.3 é¡¹ç›®å®æˆ˜å»ºè®®</h3><h4 id="13-3-1-ç›®å½•ç»“æ„æœ€ä½³å®è·µ"><a href="#13-3-1-ç›®å½•ç»“æ„æœ€ä½³å®è·µ" class="headerlink" title="13.3.1 ç›®å½•ç»“æ„æœ€ä½³å®è·µ"></a>13.3.1 ç›®å½•ç»“æ„æœ€ä½³å®è·µ</h4><figure><div class="code-wrapper"><pre class="line-numbers language-none"><code class="language-none">project&#x2F;
â”œâ”€â”€ conftest.py           # å…¨å±€fixtureé…ç½®
â”œâ”€â”€ pytest.ini            # pytesté…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt      # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ src&#x2F;                  # æºä»£ç 
â”‚   â””â”€â”€ your_package&#x2F;     # ä¸šåŠ¡ä»£ç 
â”œâ”€â”€ tests&#x2F;                # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py       # æµ‹è¯•ç›®å½•fixture
â”‚   â”œâ”€â”€ test_data&#x2F;        # æµ‹è¯•æ•°æ®
â”‚   â”‚   â”œâ”€â”€ api_cases&#x2F;    # APIæµ‹è¯•ç”¨ä¾‹æ•°æ®
â”‚   â”‚   â””â”€â”€ test_config&#x2F;  # æµ‹è¯•é…ç½®
â”‚   â”œâ”€â”€ test_api&#x2F;         # APIæµ‹è¯•
â”‚   â”œâ”€â”€ test_ui&#x2F;          # UIæµ‹è¯•
â”‚   â””â”€â”€ test_unit&#x2F;        # å•å…ƒæµ‹è¯•
â””â”€â”€ utils&#x2F;                # å·¥å…·ç±»
    â”œâ”€â”€ assert_utils.py   # æ–­è¨€å·¥å…·
    â”œâ”€â”€ request_utils.py  # è¯·æ±‚å·¥å…·
    â””â”€â”€ data_utils.py     # æ•°æ®å¤„ç†å·¥å…·<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div></figure>

<h4 id="13-3-2-CI-CDé›†æˆæŠ€å·§"><a href="#13-3-2-CI-CDé›†æˆæŠ€å·§" class="headerlink" title="13.3.2 CI&#x2F;CDé›†æˆæŠ€å·§"></a>13.3.2 CI&#x2F;CDé›†æˆæŠ€å·§</h4><ol>
<li><strong>åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´</strong>ï¼šå¯¹äºUIè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œè®¾ç½®é€‚å½“çš„è¶…æ—¶</li>
<li><strong>å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–</strong>ï¼šåˆç†è®¾ç½®<code>-n</code>å‚æ•°ï¼Œé¿å…èµ„æºç«äº‰</li>
<li><strong>æŠ¥å‘Šå½’æ¡£</strong>ï¼šè‡ªåŠ¨ä¿å­˜å†å²æµ‹è¯•æŠ¥å‘Šï¼Œä¾¿äºè¶‹åŠ¿åˆ†æ</li>
<li><strong>å¤±è´¥æˆªå›¾è‡ªåŠ¨æ”¶é›†</strong>ï¼šUIæµ‹è¯•å¤±è´¥æ—¶è‡ªåŠ¨æˆªå›¾å¹¶é™„åŠ åˆ°æŠ¥å‘Š</li>
</ol>
<h2 id="ğŸ’¡-åå››ã€æˆ‘çš„å­¦ä¹ å¿ƒå¾—ä¸æ€»ç»“"><a href="#ğŸ’¡-åå››ã€æˆ‘çš„å­¦ä¹ å¿ƒå¾—ä¸æ€»ç»“" class="headerlink" title="ğŸ’¡ åå››ã€æˆ‘çš„å­¦ä¹ å¿ƒå¾—ä¸æ€»ç»“"></a>ğŸ’¡ åå››ã€æˆ‘çš„å­¦ä¹ å¿ƒå¾—ä¸æ€»ç»“</h2><p>é€šè¿‡å­¦ä¹ è¿™é—¨è¯¾ç¨‹ï¼Œæˆ‘å¯¹pytestæœ‰äº†æ›´æ·±å…¥çš„ç†è§£ï¼Œä¹Ÿæ€»ç»“äº†ä¸€äº›ä¸ªäººç»éªŒï¼š</p>
<h3 id="14-1-æŠ€æœ¯é€‰å‹å»ºè®®"><a href="#14-1-æŠ€æœ¯é€‰å‹å»ºè®®" class="headerlink" title="14.1 æŠ€æœ¯é€‰å‹å»ºè®®"></a>14.1 æŠ€æœ¯é€‰å‹å»ºè®®</h3><ul>
<li><strong>ç®€å•é¡¹ç›®</strong>ï¼šç›´æ¥ä½¿ç”¨pytest + pytest-htmlå³å¯</li>
<li><strong>ä¸­ç­‰é¡¹ç›®</strong>ï¼špytest + fixture + æ•°æ®é©±åŠ¨ + AllureæŠ¥å‘Š</li>
<li><strong>å¤§å‹é¡¹ç›®</strong>ï¼šå®Œæ•´æ¡†æ¶åŒ–ï¼Œç»“åˆPOMã€å…³é”®å­—é©±åŠ¨ç­‰è®¾è®¡æ¨¡å¼</li>
</ul>
<h3 id="14-2-å¸¸è§é™·é˜±ä¸è§„é¿æ–¹æ³•"><a href="#14-2-å¸¸è§é™·é˜±ä¸è§„é¿æ–¹æ³•" class="headerlink" title="14.2 å¸¸è§é™·é˜±ä¸è§„é¿æ–¹æ³•"></a>14.2 å¸¸è§é™·é˜±ä¸è§„é¿æ–¹æ³•</h3><p>ğŸš¨ <strong>fixtureä½œç”¨åŸŸé€‰æ‹©ä¸å½“</strong>ï¼šæ ¹æ®èµ„æºæ¶ˆè€—åˆç†é€‰æ‹©scope</p>
<p>ğŸš¨ <strong>æµ‹è¯•ç”¨ä¾‹è¿‡åº¦ä¾èµ–</strong>ï¼šå°½é‡ä¿æŒæµ‹è¯•ç”¨ä¾‹çš„ç‹¬ç«‹æ€§</p>
<p>ğŸš¨ <strong>æ–­è¨€ä¸æ˜ç¡®</strong>ï¼šæ·»åŠ æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ï¼Œä¾¿äºå®šä½é—®é¢˜</p>
<p>ğŸš¨ <strong>å‚æ•°åŒ–æ•°æ®è¿‡å¤š</strong>ï¼šåˆç†æ§åˆ¶å‚æ•°ç»„åˆæ•°é‡ï¼Œé¿å…æµ‹è¯•æ—¶é—´è¿‡é•¿</p>
<h3 id="14-3-æ¨èçš„pytestæ’ä»¶"><a href="#14-3-æ¨èçš„pytestæ’ä»¶" class="headerlink" title="14.3 æ¨èçš„pytestæ’ä»¶"></a>14.3 æ¨èçš„pytestæ’ä»¶</h3><table>
<thead>
<tr>
<th>æ’ä»¶åç§°</th>
<th>åŠŸèƒ½æè¿°</th>
<th>æ¨èæŒ‡æ•°</th>
</tr>
</thead>
<tbody><tr>
<td>pytest-html</td>
<td>ç”ŸæˆHTMLæ ¼å¼æµ‹è¯•æŠ¥å‘Š</td>
<td>â­â­â­â­â­</td>
</tr>
<tr>
<td>pytest-xdist</td>
<td>æ”¯æŒå¤šCPU&#x2F;çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œæµ‹è¯•</td>
<td>â­â­â­â­â­</td>
</tr>
<tr>
<td>allure-pytest</td>
<td>ç”Ÿæˆç¾è§‚çš„Allureæµ‹è¯•æŠ¥å‘Š</td>
<td>â­â­â­â­â­</td>
</tr>
<tr>
<td>pytest-ordering</td>
<td>è‡ªå®šä¹‰æµ‹è¯•ç”¨ä¾‹æ‰§è¡Œé¡ºåº</td>
<td>â­â­â­â­</td>
</tr>
<tr>
<td>pytest-rerunfailures</td>
<td>å¤±è´¥ç”¨ä¾‹è‡ªåŠ¨é‡è¯•</td>
<td>â­â­â­â­</td>
</tr>
<tr>
<td>pytest-mock</td>
<td>æä¾›Mockå¯¹è±¡æ”¯æŒ</td>
<td>â­â­â­â­</td>
</tr>
<tr>
<td>pytest-cov</td>
<td>æµ‹è¯•è¦†ç›–ç‡ç»Ÿè®¡</td>
<td>â­â­â­â­</td>
</tr>
<tr>
<td>pytest-sugar</td>
<td>ç¾åŒ–å‘½ä»¤è¡Œè¾“å‡º</td>
<td>â­â­â­</td>
</tr>
</tbody></table>
<h3 id="14-4-æŒç»­å­¦ä¹ èµ„æº"><a href="#14-4-æŒç»­å­¦ä¹ èµ„æº" class="headerlink" title="14.4 æŒç»­å­¦ä¹ èµ„æº"></a>14.4 æŒç»­å­¦ä¹ èµ„æº</h3><ul>
<li><strong>å®˜æ–¹æ–‡æ¡£</strong>ï¼š<a target="_blank" rel="noopener" href="https://docs.pytest.org/">pytestå®˜æ–¹æ–‡æ¡£</a></li>
<li><strong>æ’ä»¶å¼€å‘</strong>ï¼š<a target="_blank" rel="noopener" href="https://docs.pytest.org/en/latest/how-to/writing_plugins.html">pytestæ’ä»¶å¼€å‘æŒ‡å—</a></li>
<li><strong>è¿›é˜¶ä¹¦ç±</strong>ï¼šã€ŠPython Testing with pytestã€‹</li>
<li><strong>ç¤¾åŒºèµ„æº</strong>ï¼špytest GitHubä»“åº“ã€Stack Overflow</li>
</ul>
<h2 id="ğŸ“-ç»“è¯­"><a href="#ğŸ“-ç»“è¯­" class="headerlink" title="ğŸ“ ç»“è¯­"></a>ğŸ“ ç»“è¯­</h2><p>pytestä½œä¸ºä¸€ä¸ªæˆç†Ÿçš„æµ‹è¯•æ¡†æ¶ï¼Œå…¶çµæ´»æ€§å’Œæ‰©å±•æ€§ä½¿å…¶æˆä¸ºPythonæµ‹è¯•é¢†åŸŸçš„ä½¼ä½¼è€…ã€‚é€šè¿‡æ·±å…¥ç†è§£fixtureæœºåˆ¶ã€æ•°æ®é©±åŠ¨æµ‹è¯•å’ŒAllureæŠ¥å‘Šç­‰é«˜çº§ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºå‡ºæ›´å¼ºå¤§ã€æ›´å¯ç»´æŠ¤çš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚</p>
<p>æœ€åï¼Œç¥å¤§å®¶æµ‹è¯•å·¥ä½œé¡ºåˆ©ï¼Œbugè¶Šæ¥è¶Šå°‘ï¼ğŸ‰ğŸ‰ğŸ‰</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/fluid-blog/categories/%E2%9A%99%EF%B8%8F-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%B7%A5%E7%A8%8B%E5%8C%96%EF%BC%9A%E5%B7%A5%E5%85%B7%E3%80%81%E5%AE%9E%E6%88%98%E4%B8%8E%E4%BD%93%E7%B3%BB%E5%BB%BA%E8%AE%BE/" class="category-chain-item">âš™ï¸ è‡ªåŠ¨åŒ–æµ‹è¯•å·¥ç¨‹åŒ–ï¼šå·¥å…·ã€å®æˆ˜ä¸ä½“ç³»å»ºè®¾</a>
  
  
    <span>></span>
    
  <a href="/fluid-blog/categories/%E2%9A%99%EF%B8%8F-%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E5%B7%A5%E7%A8%8B%E5%8C%96%EF%BC%9A%E5%B7%A5%E5%85%B7%E3%80%81%E5%AE%9E%E6%88%98%E4%B8%8E%E4%BD%93%E7%B3%BB%E5%BB%BA%E8%AE%BE/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%E4%BD%93%E7%B3%BB/" class="category-chain-item">è‡ªåŠ¨åŒ–æµ‹è¯•ä½“ç³»</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/fluid-blog/tags/Python/" class="print-no-link">#Python</a>
      
        <a href="/fluid-blog/tags/pytest/" class="print-no-link">#pytest</a>
      
        <a href="/fluid-blog/tags/%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8/" class="print-no-link">#æ•°æ®é©±åŠ¨</a>
      
        <a href="/fluid-blog/tags/fixture/" class="print-no-link">#fixture</a>
      
        <a href="/fluid-blog/tags/Allure/" class="print-no-link">#Allure</a>
      
        <a href="/fluid-blog/tags/YAML/" class="print-no-link">#YAML</a>
      
        <a href="/fluid-blog/tags/%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A/" class="print-no-link">#æµ‹è¯•æŠ¥å‘Š</a>
      
        <a href="/fluid-blog/tags/%E6%B5%8B%E8%AF%95%E8%BF%9B%E9%98%B6/" class="print-no-link">#æµ‹è¯•è¿›é˜¶</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>ğŸ” Pytesté«˜çº§ç‰¹æ€§å®æˆ˜ï¼šä»ç å°šæ•™è‚²è¯¾ç¨‹ä¸­å­¦åˆ°çš„è¿›é˜¶æŠ€å·§</div>
      <div>https://linn0813.github.io/2025/10/02/2025-10-02-pytest-advanced-features-guide/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>yuxiaoling</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2025å¹´10æœˆ2æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/fluid-blog/2025/10/02/2025-10-02-pytest-courses-comparison/" title="ğŸ“š pytestå­¦ä¹ æŒ‡å—ï¼šç™½æœˆé»‘ç¾½vsç å°šæ•™è‚²è¯¾ç¨‹å¯¹æ¯”ä¸å­¦ä¹ ç­–ç•¥">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">ğŸ“š pytestå­¦ä¹ æŒ‡å—ï¼šç™½æœˆé»‘ç¾½vsç å°šæ•™è‚²è¯¾ç¨‹å¯¹æ¯”ä¸å­¦ä¹ ç­–ç•¥</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/fluid-blog/2025/10/01/2025-10-01-pytest-automation-testing-guide/" title="ğŸš€ Pytestè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å…¥é—¨åˆ°å®æˆ˜ï¼šæˆ‘çš„å­¦ä¹ ç¬”è®°ä¸å®æˆ˜ç»éªŒ">
                        <span class="hidden-mobile">ğŸš€ Pytestè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å…¥é—¨åˆ°å®æˆ˜ï¼šæˆ‘çš„å­¦ä¹ ç¬”è®°ä¸å®æˆ˜ç»éªŒ</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/fluid-blog/js/events.js" ></script>
<script  src="/fluid-blog/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/fluid-blog/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script  src="https://lib.baomitu.com/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js" ></script>

  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/fluid-blog/js/local-search.js" ></script>




  
<script src="/fluid-blog/js/theme-switcher-ui.js"></script>



<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/fluid-blog/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
